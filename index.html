<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EquilÃ­brio Docente â€” ProtÃ³tipo</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<script>
  const user = JSON.parse(localStorage.getItem('loggedUser'));
  if (!user) {
    window.location.href = "login.html"; // forÃ§a login antes de acessar o site
  }
</script>

  <header>
    <div class="brand">
      <img src="logo.png" width="300px">
    </div>
    <nav>
      <a href="#" data-nav="home">InÃ­cio</a>
      <a href="#" data-nav="auto">AutoavaliaÃ§Ã£o</a>
      <a href="#" data-nav="apoio">OrientaÃ§Ãµes</a>
      <a href="#" data-nav="cursos">Trilhas</a>
    </nav>
    <button onclick="logout()" style="background:#81c784; color:white; border:none; border-radius:8px; padding:6px 10px;">Sair</button>

    <script>
        function logout() {
            localStorage.removeItem('loggedUser');
            window.location.href = "login.html";
        }
    </script>
  </header>


  <main>
    <!-- HOME -->
    <section id="home">
      <div class="hero">
        <div style="flex:1">
          <h1>Bem-vindo ao TeacherHealth</h1>
          <p class="small">Ferramenta de suporte com autoavaliaÃ§Ã£o semanal, orientaÃ§Ãµes de busca de ajuda e trilhas de mini-cursos.</p>
          <div style="margin-top:12px">
            <button class="btn" data-go="auto">ComeÃ§ar AutoavaliaÃ§Ã£o</button>
            <button style="margin-left:8px" class="btn" data-go="cursos">Ver Trilhas</button>
          </div>
        </div>
        <div style="width:220px;text-align:center">
          <!-- <img src="logo.png" alt="protÃ³tipo" style="width:100%;border-radius:8px;" /> -->
        </div>
      </div>

      <div class="grid">
        <div class="card">
          <h3>AutoavaliaÃ§Ã£o semanal</h3>
          <p class="small">Registre rapidamente seu humor e receba orientaÃ§Ãµes personalizadas.</p>
          <div style="margin-top:8px"><button class="btn" data-go="auto">Abrir</button></div>
        </div>
        <div class="card">
          <h3>OrientaÃ§Ãµes e Apoio</h3>
          <p class="small">Sinais de alerta, onde buscar ajuda e dicas prÃ¡ticas de autocuidado.</p>
          <div style="margin-top:8px"><button class="btn" data-go="apoio">Abrir</button></div>
        </div>
        <div class="card">
          <h3>Trilhas de Mini-Cursos</h3>
          <p class="small">MÃ³dulos curtos para aprender tÃ©cnicas de gestÃ£o do estresse.</p>
          <div style="margin-top:8px"><button class="btn" data-go="cursos">Explorar</button></div>
        </div>
      </div>
    </section>

    <!-- AUTOAVALIAÃ‡ÃƒO -->
    <section id="auto" class="hidden">
      <div style="display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap">
        <div style="flex:1;min-width:260px">
          <h2>AutoavaliaÃ§Ã£o Semanal</h2>
          <p class="small">Responda a pergunta 1.</p>

          <form id="moodForm">
            <div class="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <p class="small">Responda a pergunta 2</p>
            <div class ="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <p class="small">Responda a pergunta 3</p>
            <div class ="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <p class="small">Responda a pergunta 4</p>
            <div class ="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <p class="small">Responda a pergunta 5</p>
            <div class ="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <p class="small">Responda a pergunta 6</p>
            <div class ="mood-row">
              <div class="mood">
                <input type="radio" id="m1" name="mood" value="1"><label for="m1"><div class="emoji">ğŸ˜„</div><div class="small">1 - Excelente</div></label>
                <input type="radio" id="m2" name="mood" value="2"><label for="m2"><div class="emoji">ğŸ™‚</div><div class="small">2 - Bom</div></label>
                <input type="radio" id="m3" name="mood" value="3"><label for="m3"><div class="emoji">ğŸ˜</div><div class="small">3 - Regular</div></label>
                <input type="radio" id="m4" name="mood" value="4"><label for="m4"><div class="emoji">ğŸ˜”</div><div class="small">4 - Cansado</div></label>
                <input type="radio" id="m5" name="mood" value="5"><label for="m5"><div class="emoji">ğŸ˜©</div><div class="small">5 - Exausto</div></label>
              </div>
            </div>
            <div style="margin-top:10px">
              <label class="small">ObservaÃ§Ã£o (opcional)</label>
              <textarea id="note" rows="3" style="width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef"></textarea>
            </div>
            <div style="margin-top:10px">
              <button type="submit" class="btn">Enviar</button>
              <button type="button" id="viewHistory" style="margin-left:8px;padding:10px 12px;border-radius:8px;border:1px solid #e6e9ef;background:#fff">Ver histÃ³rico</button>
            </div>
          </form>

          <div id="feedback" class="hidden feedback" role="status" aria-live="polite"></div>
        </div>

        <div style="width:320px;min-width:240px">
          <div class="card">
            <h4>Resumo rÃ¡pido</h4>
            <p class="small">Se marcar 4 ou 5 frequentemente, considere procurar apoio profissional.</p>
            <ul>
              <li class="small">Pratique pequenas pausas entre aulas</li>
              <li class="small">Durma bem e mantenha alimentaÃ§Ã£o regular</li>
              <li class="small">Converse com colegas ou coordenador</li>
            </ul>
            <div style="margin-top:8px"><a href="#" data-go="apoio" class="small">Ver orientaÃ§Ãµes completas â†’</a></div>
          </div>
        </div>
      </div>

      <!-- Modal histÃ³rico -->
      <!-- <div id="historyModal" class="hidden" style="position:fixed;inset:0;background:rgba(2,6,23,0.5);display:flex;align-items:center;justify-content:center;padding:20px">
        <div style="max-width:720px;width:100%;background:var(--card);padding:18px;border-radius:10px;">
          <div style="display:flex;justify-content:space-between;align-items:center"><h3>HistÃ³rico de autoavaliaÃ§Ãµes</h3><button id="closeHistory" style="border:0;background:transparent;font-size:18px;cursor:pointer">âœ•</button></div>
          <div id="historyList" style="margin-top:12px;max-height:380px;overflow:auto"></div>
        </div>
      </div> -->
    </section>

    <!-- APOIO -->
    <section id="apoio" class="hidden">
      <h2>OrientaÃ§Ãµes e Apoio</h2>
      <p class="small">InformaÃ§Ãµes prÃ¡ticas para identificar sinais de alerta e caminhos para buscar ajuda.</p>
      <div style="display:grid;grid-template-columns:1fr 300px;gap:12px;margin-top:10px">
        <div>
          <div class="card">
            <h4>Sinais de alerta</h4>
            <ul class="small">
              <li>Dificuldade para dormir</li>
              <li>Perda de interesse nas atividades</li>
              <li>Sentir-se sobrecarregado com frequÃªncia</li>
            </ul>
          </div>

          <div class="card" style="margin-top:10px">
            <h4>Como buscar ajuda</h4>
            <p class="small">Se perceber sinais persistentes, procure um profissional de saÃºde mental. Abaixo hÃ¡ contatos de apoio.</p>
            <ul class="small">
              <li>CVV (LigaÃ§Ã£o e chat) â€” 188</li>
              <li>ServiÃ§os do SUS (CAPS) â€” procure a Secretaria Municipal de SaÃºde</li>
              <li>Plataformas de terapia online</li>
            </ul>
          </div>
        </div>

        <div>
          <div class="card">
            <h4>Autocuidado diÃ¡rio</h4>
            <ol class="small">
              <li>Respire por 4â€“6 segundos</li>
              <li>FaÃ§a pausas curtas entre aulas</li>
              <li>EstabeleÃ§a limites para trabalho pÃ³s-aula</li>
            </ol>
            <div style="margin-top:10px"><a href="#" class="small">Recursos e PDFs â†’</a></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CURSOS -->
    <section id="cursos" class="hidden">
      <h2>Trilhas de Mini-Cursos</h2>
      <p class="small">MÃ³dulos curtos e prÃ¡ticos. Progresso salvo localmente neste protÃ³tipo.</p>
      <div style="margin-top:12px">
        <!-- <div class="module" data-module="1">
          <div> -->
            <a href="modulo1.html"><img src="modulo1.png" width="600"></a><br><br><br>
          <!-- </div> -->

        </div>
<!-- 
        <div class="module" data-module="2" style="margin-top:10px">
          <div>
            <a href="modulo2.html">MÃ³dulo 2</a>
          </div>
        </div> -->

        <!-- <div class="module" data-module="3" style="margin-top:10px"> -->
          <!-- <div> -->
            <a href="modulo3.html"><img src="modulo3.png" width="600"></a>
          <!-- </div> -->
        <!-- </div> -->
      </div>

      <div id="courseViewer" class="hidden" style="margin-top:14px;background:var(--card);padding:14px;border-radius:8px">
        <h3 id="courseTitle">MÃ³dulo</h3>
        <p class="small" id="courseText">ConteÃºdo do mÃ³dulo...</p>
        <div style="margin-top:8px"><button id="completeLesson" class="btn">Marcar como concluÃ­do</button></div>
      </div>
    </section>

  </main>

  <footer style="text-align:center;padding:18px;color:var(--muted)">ProtÃ³tipo â€” nÃ£o substitui atendimento profissional. â€¢ EquilÃ­brio Docente</footer>

  <script>
    // NavegaÃ§Ã£o simples entre seÃ§Ãµes
    const sections = ['home','auto','apoio','cursos'];
    function show(id){sections.forEach(s=>document.getElementById(s).classList.add('hidden'));document.getElementById(id).classList.remove('hidden');window.scrollTo({top:0,behavior:'smooth'})}
    document.querySelectorAll('[data-nav]').forEach(a=>a.addEventListener('click',e=>{e.preventDefault();show(e.target.dataset.nav)}));
    document.querySelectorAll('[data-go]').forEach(b=>b.addEventListener('click',e=>{const t = e.currentTarget.dataset.go; show(t)}));

    // AutoavaliaÃ§Ã£o: salvar em localStorage
    const form = document.getElementById('moodForm');
    const feedback = document.getElementById('feedback');
    const historyModal = document.getElementById('historyModal');
    const historyList = document.getElementById('historyList');
    const viewHistoryBtn = document.getElementById('viewHistory');
    const closeHistory = document.getElementById('closeHistory');

    function loadHistory(){return JSON.parse(localStorage.getItem('ed_moods')||'[]')}
    function saveEntry(entry){const arr = loadHistory();arr.unshift(entry);localStorage.setItem('ed_moods',JSON.stringify(arr))}

    form.addEventListener('submit',e=>{
      e.preventDefault();
      const mood = form.elements['mood'].value;
      const note = document.getElementById('note').value.trim();
      if(!mood){feedback.classList.remove('hidden');feedback.textContent='Por favor, selecione como vocÃª se sentiu.';return}
      const entry = {mood:parseInt(mood),note:note,ts:new Date().toISOString()};
      saveEntry(entry);
      showFeedback(entry);
      form.reset();
    })

    function showFeedback(entry){feedback.classList.remove('hidden');
      let msg='Obrigado por registrar.';
      if(entry.mood>=4) msg = 'VocÃª marcou '+entry.mood+' â€” parece que foi uma semana difÃ­cil. Considere pequenas pausas, falar com colegas ou procurar ajuda profissional.';
      else if(entry.mood==3) msg = 'VocÃª marcou 3 â€” semana regular. Tente aplicar uma tÃ©cnica curta de relaxamento.';
      else msg = 'Ã“timo â€” semana com nÃ­veis de estresse baixos. Continue cuidando de si!';
      feedback.textContent = msg;
      setTimeout(()=>{feedback.classList.add('hidden')},7000);
    }

    viewHistoryBtn.addEventListener('click',()=>{
      const arr = loadHistory();
      historyList.innerHTML = arr.length?arr.map(it=>{
        const d = new Date(it.ts).toLocaleString();
        return `<div style=\"padding:8px;border-bottom:1px solid #f1f5f9\"><strong>Mood: ${it.mood}</strong> <span style=\"color:var(--muted);font-size:13px;margin-left:8px\">${d}</span><div style=\"margin-top:6px;color:var(--muted)\">${it.note||'<span style=\\"color:#cbd5e1\\">sem observaÃ§Ã£o</span>'}</div></div>`
      }).join(''):'<div class="small">Nenhuma avaliaÃ§Ã£o registrada ainda.</div>';
      historyModal.classList.remove('hidden');
    })
    closeHistory.addEventListener('click',()=>historyModal.classList.add('hidden'))

    // Cursos: simples salvamento de progresso
    document.querySelectorAll('[data-start]').forEach(btn=>btn.addEventListener('click',e=>{
      const mid = e.currentTarget.dataset.start;
      startModule(mid);
    }))

    function moduleKey(id){return 'ed_mod_'+id}
    function startModule(id){
      document.getElementById('courseViewer').classList.remove('hidden');
      document.getElementById('courseTitle').textContent = 'MÃ³dulo '+id;
      document.getElementById('courseText').textContent = 'ConteÃºdo de exemplo para o mÃ³dulo '+id+'. Aqui vocÃª veria vÃ­deo, resumo e exercÃ­cios curtos.';
      document.getElementById('completeLesson').dataset.module = id;
      window.scrollTo({top:0,behavior:'smooth'})
    }
    document.getElementById('completeLesson').addEventListener('click',e=>{
      const id = e.currentTarget.dataset.module;
      if(!id) return;
      localStorage.setItem(moduleKey(id),'completed');
      alert('MÃ³dulo '+id+' marcado como concluÃ­do (salvo localmente).');
      // update small UI: find module progress bar
      const mod = document.querySelector(`.module[data-module="${id}"]`);
      if(mod) mod.querySelector('.progress > span').style.width = '100%';
    })

    // inicializaÃ§Ã£o: mostrar home
    show('home');

    // prevenir perda de dados em refresh (exemplo simples)
    window.addEventListener('load',()=>{
      // atualizar barras de progresso com base no localStorage
      [1,2,3].forEach(id=>{if(localStorage.getItem(moduleKey(id))==='completed'){const mod=document.querySelector(`.module[data-module="${id}"]`);if(mod)mod.querySelector('.progress > span').style.width='100%'}})
    })
  </script>
</body>
</html>
